# Managers - Системные менеджеры

## Назначение
Содержит основные менеджеры, которые управляют глобальными системами игры. Все менеджеры инициализируются через GameEntryPoint и регистрируются в CoreReferences.

## Основные компоненты

### GameManager
- **Назначение**: Центральный контроллер состояния игры
- **Ответственность**:
  - Управление состояниями (пауза, игра окончена, завершение уровня)
  - Отслеживание прогресса (убитые враги, собранные предметы, время игры)
  - Координация между другими системами через события
  - Debug-функции (перезапуск, пауза по клавишам)
- **События**: OnGamePaused, OnGameResumed, OnGameOver, OnLevelCompleted

### AudioManager
- **Назначение**: Управление всеми аудио-эффектами и музыкой
- **Ответственность**:
  - Воспроизведение музыки и звуковых эффектов
  - Объектный пулинг для 3D-звуков
  - Управление громкостью (мастер, музыка, SFX)
  - Специализированные методы для оружия, врагов, окружения
- **Особенности**: Поддерживает AudioClipCollection для организованного хранения звуков

### PoolManager
- **Назначение**: Оптимизация производительности через переиспользование объектов
- **Ответственность**:
  - Создание и управление пулами объектов
  - Специализированные методы для пуль, эффектов, врагов
  - Автоматический возврат объектов в пул
  - Расширение пулов при необходимости
- **Конфигурация**: Настраивается через PoolConfiguration массив

### UIManager
- **Назначение**: Управление всем пользовательским интерфейсом
- **Ответственность**:
  - Обновление HUD (здоровье, патроны, время, оружие)
  - Управление меню (пауза, game over, завершение уровня)
  - Визуальные эффекты (прицел, индикатор урона, FPS счетчик)
  - Управление курсором и блокировкой
- **Интеграция**: Автоматически подписывается на события GameManager

## Принципы работы

1. **Инициализация**:
   - Все менеджеры создаются через GameEntryPoint
   - Порядок: PoolManager → AudioManager → UIManager → GameManager
   - Автоматическая регистрация в CoreReferences
   - Помечаются как DontDestroyOnLoad

2. **Взаимодействие**:
   - Связь через CoreReferences для быстрого доступа
   - События для слабо связанной архитектуры
   - Специализированные методы для типичных операций

3. **Безопасность**:
   - Проверка единственности каждого менеджера
   - Валидация ссылок перед использованием
   - Graceful degradation при отсутствии компонентов

## Зависимости
- **Исходящие**: Player, Weapons, Enemies, Environment, UI
- **Входящие**: Core (CoreReferences, GameEntryPoint)

## Конфигурация

### PoolManager
```csharp
[SerializeField] private PoolConfiguration[] poolConfigurations = {
    { poolName = "Bullet_Pistol", prefab = pistolBulletPrefab, initialSize = 50 },
    { poolName = "Effect_MuzzleFlash", prefab = muzzleFlashPrefab, initialSize = 10 }
};
```

### AudioManager
```csharp
[SerializeField] private AudioClipCollection weaponSounds = {
    { name = "Pistol_Fire", clip = pistolFireClip },
    { name = "Shotgun_Fire", clip = shotgunFireClip }
};
```

## Примечания
- Все менеджеры поддерживают debug-режим с расширенным логированием
- UIManager автоматически управляет курсором в зависимости от состояния игры
- AudioManager использует пулинг для 3D-звуков, но обычные SFX воспроизводятся через основной источник
- GameManager предоставляет debug-клавиши: P (пауза), R (перезапуск), Escape (game over)
